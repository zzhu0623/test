# 输入数据要求
## 输入物理模型
### 软件准备
为保证输入文件的格式正确性和可读性，请使用**Gmsh2.8.5**版本
#### Gmsh的使用
物理模型的建立语法格式与传统的Gmsh文件保持一致，详细过程可以参考GitHub上有关Gmsh的([用户手册](https://github.com/yhsc0001/Gmshyonghushouce-mianfeifenxiangGmshbanbenfenxiang))

#### 概述

Gmsh 是一个开源的有限元网格生成器，具有内置的 CAD 引擎和后处理器。支持：

-   一维、二维、三维网格生成
    
-   多种网格算法
    
-   参数化建模
    
-   多种文件格式导出    

#### 文件结构
.geo 文件
├── 参数定义
├── 几何创建
├── 物理组定义
└── 网格参数

#### 示例：上下极板
```c
Point(1) = {0, 0, 0, 1};
Point(2) = {1, 0, 0, 1};
Point(3) = {0, 1, 0, 1};
Point(4) = {1, 1, 0, 1};

Point(5) = {0, 0, -1, 1};
Point(6) = {1, 0, -1, 1};
Point(7) = {0, 1, -1, 1};
Point(8) = {1, 1, -1, 1};

Point(9) = {0, 0.45, -1, 1.0};
Point(10) = {1, 0.45, -1, 1.0};
Point(11) = {0, 0.45, 0, 1.0};
Point(12) = {1, 0.45, 0, 1.0};


Line(1) = {3, 4};
Line(2) = {4, 2};
Line(3) = {2, 1};
Line(4) = {1, 3};

Line(5) = {7, 8};
Line(6) = {8, 6};
Line(7) = {6, 5};
Line(8) = {5, 7};

Line(9) = {9, 11};
Line(10) = {10, 12};


Line Loop(1) = {1, 2, 3, 4};
Line Loop(2) = {5, 6, 7, 8};

Plane Surface(1) = {1};
Plane Surface(2) = {2};

Physical Line(50) = {9, 10};

Physical Surface(1) = {1, 2};
```
以上为一个上下极板的Gmsh文件示例，其中
```c
Physical Line(50) = {9, 10};
```
***定义了两条激励线9和10的阻抗为50Ω***

**需要强调的是：为了符合算法的输入格式，要求必须添加激励线，并且线属性定义的是激励线的阻抗。因此，请在对应激励线上定义其物理属性，同时线激励两端必须不能与网格顶点重合，需保证加在网格边界上或者网格内部。**  
```c
Physical Surface(1) = {1, 2};
```
定义了面的物理属性为1，这里统一将面属性初始化为1，表示为完美金属导体，后续会继续拓展算法支持异质分析。

![上下极板结构](C:\Users\LENOVO\Desktop\readme\1.png)
此图为根据以上代码生成的上下极板结构模型
### 学习资源

1.  **官方文档**: [https://gmsh.info/doc/texinfo/gmsh.html](https://gmsh.info/doc/texinfo/gmsh.html)   

2.  **论坛**: [https://gitlab.onelab.info/gmsh/gmsh/-/issues](https://gitlab.onelab.info/gmsh/gmsh/-/issues)
    
## 初始设置
### 代码目录结构说明

Sur_PEC/
├── model/          # 模型文件存放目录
├── Output/         # 输出结果目录
├── DIELECTRIC.txt  # 介质参数文件
└── set.txt         # 配置文件

###  各文件设置详细说明

#### 1. **model** - 模型文件夹

-   **用途**：存放仿真所需的几何模型和网格文件
    
-   **必须包含的文件**：
    
    -   `.geo` 文件：几何模型文件（Gmsh或其他CAD软件生成）
        
    -   `.msh` 文件：网格文件（由Gmsh生成）
        

#### 2. **Output** - 输出结果文件夹

-   **用途**：存放仿真计算后的结果文件
    
-   **包含的输出文件**：
    
    -   `Y_in`：导纳结果文件，其中第一列为频率，后续每两列分别为各个端口导纳的实部和虚部
        
    -   `map`：S参数分布结果文件，其中第一列为频率，后续每两列分别为S11、S22、S12、S21的实部和虚部
        
    -   `Z_in`：阻抗结果文件，其中第一列为频率，后续每两列分别为各个端口阻抗的实部和虚部
#### 3. **DIELECTRIC.txt** - 介质参数文件

-   **用途**：定义仿真中使用的介质材料参数
    
-   **说明**：此文件为预设配置，**一般情况下不需要修改**
    
#### 4. **set.txt** - 配置文件

-   **用途**：设置仿真的主要参数
    
-   **重要说明**：**此文件需要根据具体仿真需求进行修改**
    
-   **主要需修改的参数包括**：
    
    -   **FS** （仿真起始频率）
        
    -   **FE** （仿真结束频率）
        
    -  **N_FP**（ 仿真点个数）
        
    -   **DIM**（仿真单位转换常数，如果预设模型单位为mm，则请将此项设置为1e3，如果为um，则设置为1e6）
        
    - **ER**  （介电常数）
###  使用流程

1.  将几何模型文件（.geo）放入 `model/` 文件夹
    
2.  生成网格文件（.msh）并放入 `model/` 文件夹
    
3.  根据仿真需求修改 `set.txt` 中的参数
    
4.  运行仿真程序
    
5.  查看 `Output/` 文件夹中的结果文件进行分析
    

###  注意事项

-   确保 `model/` 文件夹中同时存在 .geo 和 .msh 文件
    
-   修改 `set.txt` 时请注意参数格式和单位
    
-   `DIELECTRIC.txt` 如无特殊需求请勿修改，以免影响仿真准确性
    
